{% extends "base.html" %}
{% block title %}View / Edit Lead{% endblock %}
{% block content %}
<div class="card mx-auto" style="max-width: 700px;">
  <div class="card-body">
    <h2 class="mb-4">View / Edit Lead</h2>
    <form method="POST" action="{{ url_for('update_lead', lead_id=lead.id) }}">
      <h4>Client Information</h4>
      <label>Name:</label><br>
      <input type="text" name="name" value="{{ lead.name }}" class="form-control" required><br>

      <label>Phone Number:</label><br>
      <input type="tel" name="phone" value="{{ lead.phone }}" class="form-control"><br>

      <label>Email:</label><br>
      <input type="email" name="email" value="{{ lead.email }}" class="form-control"><br>

      <h4>Case Information</h4>
      <label>Type of Case:</label><br>
      <input type="text" name="case_type" value="{{ lead.case_type }}" class="form-control"><br>

      <label>Charges:</label><br>
      <textarea name="charges" class="form-control" rows="2">{{ lead.charges }}</textarea><br>

      <label>Court:</label><br>
      <input type="text" name="court" value="{{ lead.court }}" class="form-control"><br>

      <label>Court Date:</label><br>
      <input type="date" name="court_date" value="{{ lead.court_date }}" class="form-control"><br>

      <label>Court Time:</label><br>
      <input type="time" name="court_time" value="{{ lead.court_time }}" class="form-control"><br>

      <label>Homework:</label><br>
      <textarea name="homework" class="form-control" rows="2">{{ lead.homework }}</textarea><br>

      <h4>Administrative</h4>
      <div class="form-check mb-2">
        <input class="form-check-input" type="checkbox" name="send_retainer" id="send_retainer" {% if lead.send_retainer %}checked{% endif %}>
        <label class="form-check-label" for="send_retainer">Send Retainer</label>
      </div>

      <label>Retainer Amount:</label>
      <input type="text" name="retainer_amount" value="{{ lead.retainer_amount or '' }}" class="form-control mb-3"><br>

      <div class="form-check mb-2">
        <input class="form-check-input" type="checkbox" name="lvm" id="lvm" {% if lead.lvm %}checked{% endif %}>
        <label class="form-check-label" for="lvm">LVM</label>
      </div>

      <div class="form-check mb-2">
        <input class="form-check-input" type="checkbox" name="not_pc" id="not_pc" {% if lead.not_pc %}checked{% endif %}>
        <label class="form-check-label" for="not_pc">Not a PC</label>
      </div>

      <div class="form-check mb-2">
        <input class="form-check-input" type="checkbox" name="absence_waiver" id="absence_waiver" {% if lead.absence_waiver %}checked{% endif %}>
        <label class="form-check-label" for="absence_waiver">Absence Waiver</label>
      </div>

      <label>Quote:</label><br>
      <input type="text" name="quote" value="{{ lead.quote or '' }}" class="form-control"><br>

      <label>Lead Source:</label><br>
      <input type="text" name="lead_source" value="{{ lead.lead_source }}" class="form-control"><br>

      <label>Custom Source (if applicable):</label><br>
      <input type="text" name="custom_source" value="{{ lead.custom_source }}" class="form-control"><br>

      <label>Attorney:</label><br>
      <select name="attorney" class="form-control">
        <option value="David Dischley" {% if lead.attorney == 'David Dischley' %}selected{% endif %}>David Dischley</option>
        <option value="Patrick O'Brien" {% if lead.attorney == "Patrick O'Brien" %}selected{% endif %}>Patrick O'Brien</option>
      </select><br>

      <label>Notes:</label><br>
      <textarea name="notes" class="form-control" rows="4">{{ lead.notes }}</textarea><br>

      <div class="mt-3">
        <input type="submit" value="Update Lead" class="btn btn-primary">
        <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
